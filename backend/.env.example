# ==========================================
# CUENTA CONMIGO - CONFIGURACIÓN DE ENTORNO
# ==========================================

# ============ SERVIDOR ============
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:3001

# ============ BASE DE DATOS ============
# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/cuenta_conmigo_db

# Componentes individuales (alternativo a DATABASE_URL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=cuenta_conmigo_db
DB_USER=your_db_username
DB_PASSWORD=your_db_password

# ============ AUTENTICACIÓN ============
# JWT Secret - ¡GENERA UNA CLAVE ALEATORIA SEGURA!
# Puedes generar una con: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_super_secret_jwt_key_here_minimum_32_characters

# ============ GOOGLE CLOUD (OPCIONAL) ============
# Para Text-to-Speech y Traducción
# Obtén credenciales en: https://console.cloud.google.com/
GOOGLE_APPLICATION_CREDENTIALS=/path/to/your/google-credentials.json

# ID del proyecto de Google Cloud
GOOGLE_CLOUD_PROJECT_ID=your-google-project-id

# ============ VOICERSS (FALLBACK PARA TTS) ============
# API gratuita - Regístrate en: https://www.voicerss.org/
VOICERSS_API_KEY=your_voicerss_api_key_here

# ============ LIBRETRANSLATE (FALLBACK PARA TRADUCCIÓN) ============
# URL del servicio LibreTranslate (puedes usar el público o instalar uno propio)
LIBRETRANSLATE_URL=https://libretranslate.com/translate

# ============ PERSPECTIVE API (MODERACIÓN DE CONTENIDO) ============
# Para moderar contenido de usuarios
# Obtén API key en: https://developers.perspectiveapi.com/
PERSPECTIVE_API_KEY=your_perspective_api_key_here

# ============ FIREBASE (NOTIFICACIONES PUSH) ============
# Para notificaciones push móviles
# Obtén credenciales en: https://console.firebase.google.com/
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_SERVICE_ACCOUNT_KEY={"type":"service_account","project_id":"..."}

# ============ CONFIGURACIÓN DE SEGURIDAD ============
# Nivel de logging de seguridad (debug, info, warn, error)
SECURITY_LOG_LEVEL=info

# Umbral para bloqueo de IP (número de intentos fallidos)
SECURITY_MAX_FAILED_ATTEMPTS=5

# Tiempo de bloqueo en minutos
SECURITY_BLOCK_DURATION_MINUTES=15

# ============ CONFIGURACIÓN DE CACHE ============
# TTL del cache en segundos (por defecto 300 = 5 minutos)
CACHE_TTL_SECONDS=300

# Tamaño máximo del cache en MB
CACHE_MAX_SIZE_MB=50

# ============ CONFIGURACIÓN DE RATE LIMITING ============
# Límite general de requests por IP (por ventana de 15 minutos)
RATE_LIMIT_GENERAL=100

# Límite de intentos de login por IP (por ventana de 15 minutos)
RATE_LIMIT_LOGIN=5

# ============ CONFIGURACIÓN DE CORREO (OPCIONAL) ============
# Para envío de emails de recuperación de contraseña, etc.
EMAIL_SERVICE=gmail
EMAIL_USER=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_FROM=noreply@cuenta-conmigo.com

# ============ CONFIGURACIÓN DE LOGGING ============
# Archivo de logs
LOG_FILE=logs/app.log

# Nivel de logging (error, warn, info, debug)
LOG_LEVEL=info

# ============ CONFIGURACIÓN DE BACKUP ============
# Directorio para backups automáticos
BACKUP_DIR=backups/

# Frecuencia de backup (diaria, semanal)
BACKUP_FREQUENCY=daily

# ============ CONFIGURACIÓN DE MONITORING ============
# URL para health checks externos
HEALTH_CHECK_URL=https://healthcheck.io/your-uuid

# Umbral de uso de CPU para alertas (%)
CPU_THRESHOLD=80

# Umbral de uso de memoria para alertas (%)
MEMORY_THRESHOLD=85

# ============ CONFIGURACIÓN DE ESCALABILIDAD ============
# Número máximo de conexiones de base de datos
DB_MAX_CONNECTIONS=20

# Timeout de conexión a BD en ms
DB_CONNECTION_TIMEOUT=2000

# Timeout de queries en ms
DB_QUERY_TIMEOUT=30000

# ============ CONFIGURACIÓN DE TESTING ============
# Base de datos para tests
TEST_DATABASE_URL=postgresql://username:password@localhost:5432/cuenta_conmigo_test

# Ejecutar tests en paralelo
TEST_PARALLEL=true

# Cobertura mínima requerida (%)
TEST_COVERAGE_MIN=80

# ==========================================
# INSTRUCCIONES DE CONFIGURACIÓN
# ==========================================

# 1. COPIA este archivo como .env:
#    cp .env.example .env

# 2. CONFIGURA las variables obligatorias:
#    - DATABASE_URL o componentes DB_*
#    - JWT_SECRET (genera uno seguro)

# 3. CONFIGURA servicios opcionales según necesites:
#    - Google Cloud para TTS/Translate premium
#    - VoiceRSS para TTS gratuito
#    - Perspective API para moderación
#    - Firebase para push notifications

# 4. VERIFICA la configuración:
#    npm run test:env (si tienes el script)

# 5. INICIA la aplicación:
#    npm start

# ==========================================
# NOTAS DE SEGURIDAD
# ==========================================

# - NUNCA commits el archivo .env al repositorio
# - Usa contraseñas fuertes y únicas
# - Rota las claves periódicamente
# - Monitorea los logs de seguridad
# - Mantén las dependencias actualizadas

# ==========================================
# SOPORTE
# ==========================================

# Si tienes problemas:
# 1. Revisa los logs en la consola
# 2. Verifica la conectividad a la BD
# 3. Comprueba las credenciales de APIs externas
# 4. Consulta la documentación técnica
